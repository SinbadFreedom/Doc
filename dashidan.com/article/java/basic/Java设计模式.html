<!doctype html>
<html class="no-js" lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Javaè®¾è®¡æ¨¡å¼</title>
    <meta name="description" content="Javaè®¾è®¡æ¨¡å¼">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">

    <link rel="stylesheet" href="http://dashidan.com/css/bootstrap.css">
    <link rel="stylesheet" href="http://dashidan.com/css/dashidan.css">
</head>
<body>
<!--[if lte IE 9]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience and security.</p>
<![endif]-->

<nav class="navbar navbar-default">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">
                <img src="http://dashidan.com/img/dsd24.png">
            </a>
            <a class="navbar-brand" href="http://dashidan.com/index.html">å¤§å±è›‹æ•™ç¨‹ç½‘</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://dashidan.com/about.html">å…³äº</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <!-- é¡¶éƒ¨é¢åŒ…å±‘å¯¼èˆª-->
    <ol class="breadcrumb">
        <li><a href="http://dashidan.com/index.html"><b>é¦–é¡µ</b></a></li>
        <li><a href="http://dashidan.com/article/java/index.html"><b>Javaæ•™ç¨‹</b></a></li>
        <li class="active"><a
            href="http://dashidan.com/article/java/basic/index.html"><b>æ•™ç¨‹åˆ—è¡¨</b></a></li>
    </ol>
    <hr>
    <!-- é¡¶éƒ¨æ ‡ç­¾é¡µ-->
    <ul class="nav nav-tabs" role="tablist">
        <li class="active"><a href="http://dashidan.com/article/java/basic/index.html">æ•™ç¨‹åˆ—è¡¨</a></li>
        <li><a href="http://dashidan.com/article/java/addenda/index.html">é™„å½•</a></li>
    </ul>
    <!--æ–‡æ¡£åŒº-->
    <div>
        ğŸ‘¯è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥ğŸ‘‰:<a href="http://dashidan.com/article/java/basic/Javaè®¾è®¡æ¨¡å¼.html">http://dashidan.com/article/java/basic/Javaè®¾è®¡æ¨¡å¼.html</a>
    </div>

    <div>
        <!-- æ›¿æ¢è¿™ä¸ªåŒºåŸŸ-->
        <div>
            <div class="dsd_title"><h1>19.Javaè®¾è®¡æ¨¡å¼</h1></div>
            <div class="dsd_catalog"><a href="#â‘ ">â‘  è®¾è®¡æ¨¡å¼ç®€ä»‹</a>
                <hr>
                <a href="#â‘¡">â‘¡ å•ä¾‹æ¨¡å¼</a>
                <hr>
                <a href="#â‘¢">â‘¢ å·¥å‚æ¨¡å¼</a>
                <hr>
                <a href="#â‘£">â‘£ è§‚å¯Ÿè€…æ¨¡å¼</a>
                <hr>
                <a href="#â‘¤">â‘¤ ç›¸å…³æ–‡ç« </a></div>
        </div>
        <div class="jumbotron">
            <p>è½¯ä»¶è®¾è®¡é¢†åŸŸçš„å››ä½ä¸–ç•Œçº§å¤§å¸ˆGang Of Four (GoF):Erich Gamma, Richard Helm, Ralph Johnson,John
                Vlissidesåˆè‘—äº†ä¸€æœ¬éå¸¸è‘—åçš„ä¹¦ã€ŠDesign Patterns - Elements of Reusable Object-Oriented
                Softwareã€‹ç¿»è¯‘çš„ä¸­æ–‡åä¸ºã€Šè®¾è®¡æ¨¡å¼:å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹.ä¹¦ä¸­æå‡ºäº†23ç§åŸºæœ¬è®¾è®¡æ¨¡å¼,ä»ç†è®ºé«˜åº¦æç‚¼å¹¶è§„èŒƒäº†è®¾è®¡æ¨¡å¼,å¯¹é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡äº§ç”Ÿäº†å·¨å¤§å½±å“.
            </p>
        </div>
        <p><img class="center-block img-responsive" src="http://dashidan.com/img/java/basic/19-1.jpg" alt="å›¾19-1"/></p>
        <div class="dsd_title"><a href="#top" id="â‘ ">â‘  è®¾è®¡æ¨¡å¼ç®€ä»‹ğŸ”</a></div>
        <p>æ€»ä½“æ¥è¯´è®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰å¤§ç±»:
            åˆ›å»ºå‹æ¨¡å¼,å…±äº”ç§:å·¥å‚æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€åŸå‹æ¨¡å¼.
            ç»“æ„å‹æ¨¡å¼,å…±ä¸ƒç§:é€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼.
            è¡Œä¸ºå‹æ¨¡å¼,å…±åä¸€ç§:ç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å­æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼.</p>
        <p>æœ‰äº›è®¾è®¡æ¨¡å¼æˆ‘ä¸ªäººè®¤ä¸º,ä¸æ˜¯å¾ˆå…·è±¡, å°±åƒæ˜Ÿåº§ä¸€æ ·æŠ½è±¡æ¦‚å¿µå±…å¤š,å¯¼è‡´åº”ç”¨åœºæ™¯ä¸æ˜ç¡®. æ‰€ä»¥ä¸å¸Œæœ›ä»–ä»¬å ç”¨æˆ‘è¿‡å¤šçš„è„‘å®¹é‡å’Œæ—¶é—´.åªæŒ‘é€‰å‡ ä¸ªå«é‡‘é‡é«˜, æ¨¡å‹å…·è±¡, åº”ç”¨åœºæ™¯å¹¿æ³›çš„æ¨¡å¼æ¥ä»‹ç».
            ä»¥ä¸‹è¿™å‡ ä¸ªéƒ½æ˜¯éå¸¸å€¼å¾—èŠ±æ—¶é—´å»ç†Ÿæ‚‰çš„æ¨¡å¼.</p>
        <div class="dsd_title"><a href="#top" id="â‘¡">â‘¡ å•ä¾‹æ¨¡å¼ğŸ”</a></div>
        <p>å•ä¾‹æ¨¡å¼å³æ˜¯åªäº§ç”Ÿä¸€ä¸ªå¯¹è±¡çš„æ¨¡å¼.åœ¨Javaä¸­ï¼Œæ¯æ¬¡ä½¿ç”¨<code>new</code>å…³é”®å­—, å°±ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡. æœ‰æ—¶æˆ‘ä»¬éœ€è¦åªæœ‰ä¸€ä¸ªå¯¹è±¡äº§ç”Ÿ, æ¯”å¦‚ä¸€äº›ç®¡ç†ç±», å…¨å±€ç®¡ç†å…¶å®ƒæ¨¡å—æ—¶,
            è¿™ä¸ªç®¡ç†ç±»é€‚åˆé‡‡ç”¨å•ä¾‹æ¨¡å¼.</p>
        <p>æ™®é€šçš„å•ä¾‹æ¨¡å¼åˆ†ä¸º2ç§, æ‡’æ±‰å¼å’Œé¥¿æ±‰å¼.æ‡’æ±‰å¼æ¯”è¾ƒæ‡’, ç”¨åˆ°çš„æ—¶å€™æ‰åˆ›å»ºå¯¹è±¡, é¥¿æ±‰å¼ä¸è®²ç†, ä½ ç”¨ä¸ç”¨æˆ‘éƒ½åˆ›å»ºå¥½æ”¾ç€. </p>
        <p><img class="center-block img-responsive" src="http://dashidan.com/img/common/secret.jpg" alt="é™é¾™åå…«æŒç§˜ç±"/></p>
        <p>æ™®é€šå•ä¾‹æ¨¡å¼çš„ç§˜ç±:</p>
        <ul>
            <li>å°†æ„é€ å‡½æ•°å®šä¹‰ä¸ºç§æœ‰<code>private</code>, åªèƒ½åœ¨æœ¬ç±»ä¸­åˆ›å»º, ä¸èƒ½è¢«ç»§æ‰¿.</li>
            <li>é€šè¿‡<code>private</code>å’Œ<code>static</code>å…³é”®å­—å®šä¹‰ä¸€ä¸ªç§æœ‰å¹¶ä¸”é™æ€çš„æœ¬ç±»å®ä¾‹å¯¹è±¡, ä¿è¯å†…å­˜ä¸­åªæœ‰1ä¸ªå®ä¾‹, å¹¶ä¸”åªæœ‰æœ¬ç±»èƒ½è°ƒç”¨.</li>
            <li>å…¬å¼€ä¸€ä¸ªè·å¾—æœ¬ç±»å®ä¾‹çš„é™æ€æ–¹æ³•, æ¥è·å–è¿™ä¸ªå®ä¾‹, ä¿è¯æ¯æ¬¡å¾—åˆ°çš„å®ä¾‹éƒ½æ˜¯åŒä¸€ä¸ª, æ¥å®ç°å•ä¾‹æ¨¡å¼.</li>
        </ul>
        <p>åˆ—å‡º4ç§å¸¸ç”¨çš„å•ä¾‹æ¨¡å¼çš„å†™æ³•, æ¨èç¬¬4ç§. ç¬¬4ç§æ˜¯é€šè¿‡å†…éƒ¨ç±»å®ç°, é«˜æ•ˆä¸”çº¿ç¨‹å®‰å…¨. è®°ä½è¿™ä¸ªå¥½äº†, å…¶ä»–çš„å¯ä»¥å¿˜.</p>
        <h3>1.æ‡’æ±‰å¼</h3>
        <pre class="prettyprint"><code class="java language-java">/**
 * æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼
 */
class Singleton1 {

    private static Singleton1 singleton1;

    private Singleton1() {

    }

    public static Singleton1 getInstance() {
        if (null == singleton1) {
            singleton1 = new Singleton1();
        }
        return singleton1;
    }
}
</code></pre>
        <h3>2.é¥¿æ±‰å¼</h3>
        <pre class="prettyprint"><code class="java language-java">/**
 * é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼
 */
class Singleton2 {

    private static Singleton2 singleton2 = new Singleton2();

    private Singleton2() {
    }

    public static Singleton2 getInstance() {
        return singleton2;
    }
}
</code></pre>
        <h3>3.çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼</h3>
        <pre class="prettyprint"><code class="java language-java">/**
 * çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼
 */
class Singleton3 {

    private static Singleton3 singleton3;

    private Singleton3() {

    }

    public static synchronized Singleton3 getInstance() {
        if (null == singleton3) {
            singleton3 = new Singleton3();
        }
        return singleton3;
    }
}
</code></pre>
        <h3>4.å†…éƒ¨ç±»çº¿ç¨‹å®‰å…¨å•ä¾‹æ¨¡å¼</h3>
        <p>è¿™ç§æ–¹å¼åˆ©ç”¨javaçš„<code>final</code>å…³é”®å­—ç‰¹æ€§, ä¸€æ—¦èµ‹å€¼æ— æ³•æ”¹å˜.çº¿ç¨‹å®‰å…¨,æ•ˆç‡é«˜æ¨èæ–¹å¼.</p>
        <pre class="prettyprint"><code class="java language-java">/**
 * å†…éƒ¨ç±»çº¿ç¨‹å®‰å…¨å•ä¾‹æ¨¡å¼
 */
class Singleton4 {

    private static class SingletonHolder {
        public final static Singleton4 instance = new Singleton4();
    }

    public static Singleton4 getInstance() {
        return SingletonHolder.instance;
    }
}
</code></pre>
        <div class="dsd_title"><a href="#top" id="â‘¢">â‘¢ å·¥å‚æ¨¡å¼ğŸ”</a></div>
        <p>å·¥å‚æ¨¡å¼æœ¬è´¨æ˜¯é€šè¿‡æ¡ä»¶è¯­å¥,æ ¹æ®ä¸åŒçš„æ¡ä»¶åˆ›å»ºä¸åŒçš„å¯¹è±¡.é€šå¸¸æƒ…å†µä¸‹, äº§ç”Ÿçš„å¯¹è±¡ç»§æ‰¿è‡ªåŒä¸€ä¸ªçˆ¶ç±», å·¥å‚ç±»æä¾›çš„æ–¹æ³•è¿”å›çš„ç±»å‹ä¸ºçˆ¶ç±»å¯¹è±¡ç±»å‹.è¾¾åˆ°å¯¹è±¡å°è£…çš„ä½œç”¨.</p>
        <p>ä»£ç ç¤ºä¾‹:</p>
        <pre class="prettyprint"><code class="java language-java">package com.dashidan.lesson19;

/**
 * å¤§å±è›‹æ•™ç¨‹ç½‘-dashidan.com
 * &lt;p&gt;
 * Javaæ•™ç¨‹åŸºç¡€ç¯‡:  19.Javaè®¾è®¡æ¨¡å¼
 * å·¥å‚æ¨¡å¼
 */
public class Demo2 {
    public static void main(String[] args) {
        /** ä¼ å…¥éœ€è¦ç”Ÿäº§çš„äº§å“ç±»å‹*/
        Product product = Factory.getProduct(1);
        /** æ‰“å°äº§å“ä¿¡æ¯*/
        product.info();
    }
}

/**
 * å·¥å‚æ¨¡å¼
 * æ ¹æ®ä¸åŒçš„ç±»å‹ï¼Œç”Ÿäº§ä¸åŒçš„äº§å“
 */
class Factory {
    public static Product getProduct(int type) {
        switch (type) {
            case 1:
                return new Product1();
            case 2:
                return new Product2();
        }
        return null;
    }
}

/**
 * äº§å“çš„çˆ¶ç±»æ˜¯æŠ½è±¡ç±»ï¼Œæä¾›ä¸€ä¸ªinfoæ–¹æ³•
 */
abstract class Product {

    public abstract void info();
}

/**
 * äº§å“Product1ç»§æ‰¿è‡ªçˆ¶ç±»Product
 */
class Product1 extends Product {
    @Override
    public void info() {
        System.out.println("Product1 info.");
    }
}

/**
 * äº§å“Product2ç»§æ‰¿è‡ªçˆ¶ç±»Product
 */
class Product2 extends Product {
    @Override
    public void info() {
        System.out.println("Product2 info.");
    }
}
</code></pre>
        <p>è¾“å‡º:</p>
        <pre><code>Product1 info.
</code></pre>
        <div class="dsd_title"><a href="#top" id="â‘£">â‘£ è§‚å¯Ÿè€…æ¨¡å¼ğŸ”</a></div>
        <p>è§‚å¯Ÿè€…æ¨¡å¼(ä¹Ÿç§°ä¸ºå‘å¸ƒ(publish)-è®¢é˜…(Subscribe)æ¨¡å¼ã€æ¨¡å‹-è§†å›¾(View)æ¨¡å¼ã€æº-æ”¶å¬è€…(Listener)æ¨¡å¼æˆ–ä»å±è€…æ¨¡å¼).æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„é™ä½ä»£ç è€¦åˆåº¦çš„æ–¹å¼.</p>
        <p><img class="center-block img-responsive" src="http://dashidan.com/img/common/secret.jpg" alt="é™é¾™åå…«æŒç§˜ç±"/></p>
        <p>è§‚å¯Ÿè€…æ¨¡å¼çš„ç§˜ç±:</p>
        <ul>
            <li>è§‚å¯Ÿè€…åœ¨å‘å¸ƒè€…å¯¹è±¡ä¸Šæ³¨å†Œæ¶ˆæ¯ä¾¦å¬, åŠ å…¥æ¶ˆæ¯ä¾¦å¬åˆ—è¡¨</li>
            <li>å‘å¸ƒè€…éå†æ¶ˆæ¯ä¾¦å¬åˆ—è¡¨, è°ƒç”¨è§‚å¯Ÿè€…æ–¹æ³•å¤„ç†æ¶ˆæ¯</li>
            <li>ä¸åŒçš„è§‚å¯Ÿè€…å¯¹è±¡é€šå¸¸ç»§æ‰¿åŒä¸€ä¸ªè§‚å¯Ÿè€…æ¥å£, é€šè¿‡æ¥å£æ–¹æ³•ç»Ÿä¸€å¤„ç†</li>
        </ul>
        <p>é€šå¸¸ç”¨åœ¨ä¸€å¯¹å¤šæˆ–è€…å¤šå¯¹å¤šçš„åœºæ™¯ä¸­, ä¸€ä¸ªå¯¹è±¡æ•°æ®å˜åŒ–äº†, éœ€è¦é€šçŸ¥å…¶ä»–å¯¹è±¡çš„åœºæ™¯. æ¯”å¦‚<code>ActionScript3</code>è¯­è¨€åº•å±‚çš„äº‹ä»¶å†’æ³¡æœºåˆ¶, å°±æ˜¯é‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼è®¾è®¡.</p>
        <p>ä»£ç ç¤ºä¾‹:</p>
        <pre class="prettyprint"><code class="java language-java">package com.dashidan.lesson19;


import java.util.ArrayList;

/**
 * å¤§å±è›‹æ•™ç¨‹ç½‘-dashidan.com
 * &lt;p&gt;
 * Javaæ•™ç¨‹åŸºç¡€ç¯‡:  19.Javaè®¾è®¡æ¨¡å¼
 * è§‚å¯Ÿè€…æ¨¡å¼
 */
public class Demo3 {
    public static void main(String[] args) {
        /** åˆå§‹åŒ–å‘å¸ƒè€…å’Œè§‚å¯Ÿè€…*/
        Publisher publisher = new Publisher();
        Observer1 observer1 = new Observer1();
        Observer2 observer2 = new Observer2();
        /** åŠ å…¥2ä¸ªè§‚å¯Ÿè€…åˆ°å‘å¸ƒè€…çš„æ¶ˆæ¯ä¾¦å¬é˜Ÿåˆ—*/
        publisher.addObserver(observer1);
        publisher.addObserver(observer2);
        /** é€šçŸ¥è§‚å¯Ÿè€…*/
        publisher.notifyAllObserver();
    }
}

/**
 * å‘å¸ƒè€…
 */
class Publisher {

    /**
     * å‘å¸ƒè€…çš„æ¶ˆæ¯ä¾¦å¬é˜Ÿåˆ—
     */
    ArrayList&lt;IObserver&gt; observers = new ArrayList&lt;&gt;();

    /**
     * åŠ å…¥æ¶ˆæ¯ä¾¦å¬é˜Ÿåˆ—
     */
    public void addObserver(IObserver iObserver) {
        System.out.println("åŠ å…¥è§‚å¯Ÿè€…");
        observers.add(iObserver);
    }

    /**
     * é€šçŸ¥ä¾¦å¬é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„è§‚å¯Ÿè€…
     */
    public void notifyAllObserver() {
        for (IObserver iObserver : observers) {
            System.out.println("é€šçŸ¥è§‚å¯Ÿè€…");
            iObserver.action();
        }
    }
}

/**
 * è§‚å¯Ÿè€…æ¥å£
 */
interface IObserver {
    void action();
}

/**
 * è§‚å¯Ÿè€…Observer1ç±»
 */
class Observer1 implements IObserver {
    @Override
    public void action() {
        System.out.println("Observer1 action.");
    }
}

/**
 * è§‚å¯Ÿè€…Observer2ç±»
 */
class Observer2 implements IObserver {
    @Override
    public void action() {
        System.out.println("Observer2 action.");
    }
}
</code></pre>
        <p>è¾“å‡º:</p>
        <pre><code>åŠ å…¥è§‚å¯Ÿè€…
åŠ å…¥è§‚å¯Ÿè€…
é€šçŸ¥è§‚å¯Ÿè€…
Observer1 action.
é€šçŸ¥è§‚å¯Ÿè€…
Observer2 action.
</code></pre>
        <div class="dsd_title"><a href="#top" id="â‘¤">â‘¤ ç›¸å…³æ–‡ç« ğŸ”</a></div>
        <p>ğŸ“– <a href="http://dashidan.com/article/java/addenda/Javaç¤ºä¾‹ä»£ç ä½¿ç”¨æ–¹æ³•.html">Javaç¤ºä¾‹ä»£ç ä½¿ç”¨æ–¹æ³•</a></p>
    </div>
    <hr>
    <!-- åº•éƒ¨é¢åŒ…å±‘å¯¼èˆª-->
    <ol class="breadcrumb">
        <li><a href="http://dashidan.com/index.html"><b>é¦–é¡µ</b></a></li>
        <li><a href="http://dashidan.com/article/java/index.html"><b>Javaæ•™ç¨‹</b></a></li>
        <li class="active"><a
            href="http://dashidan.com/article/java/basic/index.html"><b>æ•™ç¨‹åˆ—è¡¨</b></a></li>
    </ol>
    <hr>
    <!--<nav>-->
    <div class="text-center">
        <div>
            <a href="http://dashidan.com/article/java/basic/Javaçº¿ç¨‹.html">ğŸ”º ä¸Šä¸€ç¯‡: Javaçº¿ç¨‹</a>
        </div>
        <div>
            <a href="http://dashidan.com/article/java/basic/Javaç¼–ç ä¼˜åŒ–.html">ğŸ”» ä¸‹ä¸€ç¯‡: Javaç¼–ç ä¼˜åŒ–</a>
        </div>
    </div>
    <!--</nav>-->
</div>

<div style="display:none;">
    <script src="https://s19.cnzz.com/z_stat.php?id=1264355070&web_id=1264355070" language="JavaScript"></script>
</div>

<script src="http://dashidan.com/js/jquery-3.2.1.min.js"></script>
<script src="http://dashidan.com/js/vendor/modernizr-custom.js"></script>
<script src="http://dashidan.com/js/bootstrap.js"></script>
<script src="http://dashidan.com/js/google-code-prettify/run_prettify.js"></script>
</body>
</html>
