14.MongoDBæŸ¥è¯¢è¿”å›æŒ‡å®šå­—æ®µ
===

MonoDBæŸ¥è¯¢é»˜è®¤è¿”å›æ–‡æ¡£çš„å…¨éƒ¨å­—æ®µ. ä½ å¯ä»¥æŒ‡å®šè¿”å›å­—æ®µ.

â‘  åˆå§‹åŒ–æ•°æ®
---

```
db.inventory.insertMany( [
  { item: "journal", status: "A", size: { h: 14, w: 21, uom: "cm" }, instock: [ { warehouse: "A", qty: 5 } ] },
  { item: "notebook", status: "A",  size: { h: 8.5, w: 11, uom: "in" }, instock: [ { warehouse: "C", qty: 5 } ] },
  { item: "paper", status: "D", size: { h: 8.5, w: 11, uom: "in" }, instock: [ { warehouse: "A", qty: 60 } ] },
  { item: "planner", status: "D", size: { h: 22.85, w: 30, uom: "cm" }, instock: [ { warehouse: "A", qty: 40 } ] },
  { item: "postcard", status: "A", size: { h: 10, w: 15.25, uom: "cm" }, instock: [ { warehouse: "B", qty: 15 }, { warehouse: "C", qty: 35 } ] }
]);
```

ä½ å¯ä»¥åœ¨ä»¥ä¸‹çª—å£è¾“å…¥å‘½ä»¤æµ‹è¯•:

<iframe class="mws-root" allowfullscreen="" sandbox="allow-scripts allow-same-origin" width="600" height="280" src="https://mws.mongodb.com/?version=3.4"></iframe>


â‘¡ åªè¿”å›æŒ‡å®šå­—æ®µå’Œ`_id`å­—æ®µ
---

å¯ä»¥é€šè¿‡å°†`<field>`å­—æ®µè®¾ç½®ä¸º1, æ¥æŒ‡å®šè¿”å›å­—æ®µ. é»˜è®¤ä¼šè¿”å›`_id`å­—æ®µ.

```
db.inventory.find( { status: "A" }, { item: 1, status: 1 } )
```

å¯¹åº”çš„SQLè¯­å¥:

```
SELECT _id, item, status from inventory WHERE status = "A"
```

â‘¢ MongoDbæŸ¥è¯¢ç»“æœå»æ‰`_id`å­—æ®µ
---

å¯ä»¥é€šè¿‡å°†æŒ‡å®š`<field>`å­—æ®µè®¾ç½®ä¸º`0`, æ¥æ’é™¤æŒ‡å®šå­—æ®µ.

```
db.inventory.find( { status: "A" }, { item: 1, status: 1, _id: 0 } )
```

å¯¹åº”çš„SQLè¯­å¥:

```
SELECT item, status from inventory WHERE status = "A"
```

â‘£ MongoDbæŸ¥è¯¢ç»“æœè¿”å›ä¸åŒ…å«æŒ‡å®šå­—æ®µ
---

ä½ å¯ä»¥é€šè¿‡è®¾ç½®`<field>`å­—æ®µè®¾ç½®ä¸º`0`, æ¥æ’é™¤æŒ‡å®šå­—æ®µ.

```
db.inventory.find( { status: "A" }, { status: 0, instock: 0 } )
```

`_id`å­—æ®µæ˜¯ä¸ªä¾‹å¤–, é™¤äº†`_id`å­—æ®µå¤–, ä¸åŒåŒæ—¶æŒ‡å®šåŒ…å«å’Œæ’é™¤çš„æ•°æ®. åªèƒ½é€‰æ‹©å…¶ä¸­ä¸€ç§æ–¹å¼.


â‘¤ MongoDbæŸ¥è¯¢å†…åµŒæ–‡æ¡£è¿”å›æŒ‡å®šå­—æ®µ
---

å¯ä»¥é€šè¿‡`.`æ“ä½œç¬¦æ¥è¿”å›æŒ‡å®šå­—æ®µ.

```
db.inventory.find(
   { status: "A" },
   { "size.uom": 0 }
)
```

â‘¥ MongoDbæŸ¥è¯¢è¿”å›æ•°ç»„ä¸­æŒ‡å®šæ•°ç»„å¯¹è±¡
---

MongoDBæä¾›äº†: `$elemMatch`, `$slice`, and `$`. æ“ä½œç¬¦æ¥è¿”å›æŒ‡å®šæ•°ç»„æ•°æ®.

ä»¥ä¸‹ç¤ºä¾‹é€šè¿‡`$slice`æ“ä½œç¬¦è¿”å›æ•°ç»„ä¸­æœ€åä¸€ä¸ªæ•°æ®.

```
db.inventory.find( { status: "A" }, { name: 1, status: 1, instock: { $slice: -1 } } )
```

`$elemMatch`, `$slice`, and `$`è¿™ä¸‰ä¸ªæ“ä½œç¬¦æ˜¯å”¯ä¸€çš„æ–¹å¼æ¥æŒ‡å®šè¿”å›æ•°ç»„ä¸­çš„æ•°æ®, ä½ ä¸èƒ½æŒ‡å®šæ•°ç»„ç´¢å¼•æ¥è¿”å›æ•°ç»„ä¸­çš„æ•°æ®.ä¾‹å¦‚`{ "instock.0": 1 } `ä¸ä¼šè¿”å›æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ .
 

â‘¦ å‚è€ƒæ–‡ç« 
---
 
ğŸ“– [https://docs.mongodb.com/manual/tutorial/project-fields-from-query-results/](https://docs.mongodb.com/manual/tutorial/project-fields-from-query-results/)
 
â‘§ ç›¸å…³æ–‡ç« 
---
 
ğŸ“– [MongoDBä¸­æ–‡æ–‡æ¡£](http://localhost/article/mongodb/index.html)
 



