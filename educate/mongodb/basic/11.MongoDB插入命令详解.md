11.MongoDBæ’å…¥å‘½ä»¤è¯¦è§£
===

MongoDBæ‰§è¡Œæ’å…¥æ•°æ®æ“ä½œæ—¶, å¦‚æœæŒ‡å®šé›†åˆä¸å­˜åœ¨, ä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªé›†åˆ.


â‘  æ’å…¥å•ä¸ªæ–‡æ¡£
---

MongoDB3.2ç‰ˆæœ¬æ–°ç‰¹æ€§

`db.collection.insertOne()`å‘ä¸€ä¸ªé›†åˆä¸­æ’å…¥ä¸€æ¡æ•°æ®.

æ’å…¥çš„æ•°æ®å¦‚æœæ²¡æœ‰æŒ‡å®š`_id`è¿™ä¸ªå­—æ®µçš„å€¼, MongoDBä¼šè‡ªåŠ¨è®¾ç½®ä¸€ä¸ª`ObjectId`ç±»å‹çš„å€¼.

```
db.inventory.insertMany([
   { item: "journal", qty: 25, tags: ["blank", "red"], size: { h: 14, w: 21, uom: "cm" } },
   { item: "mat", qty: 85, tags: ["gray"], size: { h: 27.9, w: 35.5, uom: "cm" } },
   { item: "mousepad", qty: 25, tags: ["gel", "blue"], size: { h: 19, w: 22.85, uom: "cm" } }
])
```

ä½ å¯ä»¥åœ¨ä»¥ä¸‹çª—å£ä¸­è¿è¡Œè¯¥ç¨‹åº.

<iframe class="mws-root" allowfullscreen="" sandbox="allow-scripts allow-same-origin" width="600" height="280" src="https://mws.mongodb.com/?version=3.4"></iframe>

æŸ¥çœ‹æ’å…¥çš„æ•°æ®, è¾“å…¥:

```
db.inventory.find( {} )
```

â‘¡ æ’å…¥è¿è½¬çŠ¶æ€
---

###1.åˆ›å»ºé›†åˆ

å¦‚æœç›®æ ‡é›†åˆä¸å­˜åœ¨, åˆ™åˆ›å»ºè¯¥é›†åˆ.

###2._idå­—æ®µ

MongoDBä¸­æ¯ä¸ªæ–‡æ¡£éƒ½éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„`_id`å­—æ®µæ¥ä½œä¸ºä¸»é”®. å¦‚æœæ’å…¥çš„æ–‡æ¡£æ•°æ®æ²¡æœ‰è¯¥å­—æ®µ, MongoDBä¼šè‡ªåŠ¨ç”Ÿæˆè¯¥å­—æ®µ, å¹¶èµ‹äºˆ`ObjectId`ç±»å‹çš„å€¼.

è¿™ä¸ªè¿‡ç¨‹åŒæ ·é€‚ç”¨äº`update`æ“ä½œæ—¶è®¾å®šäº†`upsert:true`å±æ€§.

###3.åŸå­æ€§

MongoDBå†™æ“ä½œæä¾›æ–‡æ¡£çº§åˆ«çš„åŸå­æ“ä½œ.

###4.å†™å…¥å›æ‰§

MonogoDBæ‰§è¡Œå†™æ“ä½œæ—¶, å¯ä»¥æŒ‡å®šå›æ‰§ç­‰çº§.è¯¦æƒ…å‚è€ƒ[Write Concern](https://docs.mongodb.com/manual/reference/write-concern/).

å†™å…¥ç›¸å…³æ–¹æ³•:
```
db.collection.insertOne()
db.collection.insertMany()
```
updateæ“ä½œä¸å†™å…¥ç›¸å…³çš„æ–¹æ³•:
```
db.collection.update() when used with the upsert: true option.
db.collection.updateOne() when used with the upsert: true option.
db.collection.updateMany() when used with the upsert: true option.
db.collection.findAndModify() when used with the upsert: true option.
db.collection.findOneAndUpdate() when used with the upsert: true option.
db.collection.findOneAndReplace() when used with the upsert: true option.
db.collection.save().
db.collection.bulkWrite().
```

â‘¢ å‚è€ƒæ–‡ç« 
---

ğŸ“– [https://docs.mongodb.com/manual/tutorial/insert-documents/](https://docs.mongodb.com/manual/tutorial/insert-documents/)


â‘£ ç›¸å…³æ–‡ç« 
---

ğŸ“– [MongoDBä¸­æ–‡æ–‡æ¡£](http://localhost/article/mongodb/index.html)

