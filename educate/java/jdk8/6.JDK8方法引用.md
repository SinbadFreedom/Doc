6.JDK8æ–¹æ³•å¼•ç”¨(method referrance)
===


â‘  æ–¹æ³•å¼•ç”¨çš„æ¦‚å¿µ
---

æŸäº›lambdaè¡¨è¾¾å¼é‡Œé¢ä»…ä»…æ˜¯æ‰§è¡Œä¸€ä¸ªæ–¹æ³•è°ƒç”¨. åœ¨è¿™ç§æƒ…å†µä¸‹,ä¸ç”¨lambdaè¡¨è¾¾å¼,ç›´æ¥é€šè¿‡æ–¹æ³•åç§°å¼•ç”¨æ–¹æ³•çš„å½¢å¼å¯è¯»æ€§æ›´é«˜ä¸€äº›,è¿™ç§å½¢å¼å°±æ˜¯æ–¹æ³•å¼•ç”¨. æ–¹æ³•å¼•ç”¨æ˜¯ä¸€ç§æ›´ç®€æ´æ˜“æ‡‚çš„lambdaè¡¨è¾¾å¼.
	   
çœ‹ä¸‹é¢è¿™ä¸ªPersonç±»:

```java
public class Person {
       public enum Sex {
              MALE, FEMALE
       }
       String name;
       LocalDate birthday;
       Sex gender;
       String emailAddress;
       public int getAge() {
              // ...
       }
       public Calendar getBirthday() {
              return birthday;
       }
       public static int compareByAge(Person a, Person b) {
              return a.birthday.compareTo(b.birthday);
       }
}
```

å‡è®¾ä½ ç¤¾äº¤ç½‘ç»œé‡Œçš„å¥½å‹ä»¬æ„æˆä¸€ä¸ªæ•°ç»„, ç„¶åä½ æƒ³æŒ‰å¥½å‹å¹´é¾„å¯¹æ•°ç»„æ’åº.ä½ å¯èƒ½ä¼šè¿™ä¹ˆå†™ä»£ç :

```java
Person[]rosterAsArray = roster.toArray(new Person[roster.size()]);//å¯è®¤ä¸ºrosteræ˜¯ä½ å¥½å‹çš„åå†Œ
class PersonAgeComparator implements Comparator<Person> {
public int compare(Person a, Person b) {
        return a.getBirthday().compareTo(b.getBirthday());
    }
}
Arrays.sort(rosterAsArray, new PersonAgeComparator());
```

sortæ–¹æ³•å®šä¹‰å¦‚ä¸‹:

```java
static <T> void sort(T[] a, Comparator<? super T> c)
```

Comparatoræ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°æ¥å£. å› æ­¤,è¿™é‡Œå¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼,çœå»äº†å®šä¹‰PersonAgeComparatorç±»å’Œåˆ›å»ºä¸€ä¸ªç±»å®ä¾‹.

ä¿®æ”¹å¦‚ä¸‹:

```java
Arrays.sort(rosterAsArray,
    (Person a, Person b) -> {
        return a.getBirthday().compareTo(b.getBirthday());
    }
);
```

ç„¶è€Œ, æ¯”è¾ƒä¸¤ä¸ªPersonå¯¹è±¡çš„ç”Ÿæ—¥å¤§å°çš„æ–¹æ³•Person.compareByAge,å·²ç»åœ¨Personç±»ä¸­å®šä¹‰äº†. è¿™æ ·,åœ¨lambdaè¡¨è¾¾å¼ä¸»ä½“å†…ç›´æ¥è°ƒç”¨Person.compareByAgeå°±å¥½äº†:

```java
Arrays.sort(rosterAsArray,
    (a, b) -> Person.compareByAge(a, b)
);
```

å› ä¸ºä¸Šé¢çš„lamdbaè¡¨è¾¾å¼è°ƒç”¨äº†ä¸€ä¸ªç°æˆçš„æ–¹æ³•,æ‰€ä»¥å¯ä»¥ç”¨æ–¹æ³•å¼•ç”¨æ›¿ä»£è¿™ä¸ªlamdbaè¡¨è¾¾å¼:

```java
Arrays.sort(rosterAsArray,
   Person::compareByAge
);
```

æ–¹æ³•å¼•ç”¨Person::compareByAgeè·Ÿlambdaè¡¨è¾¾å¼(a, b) -> Person.compareByAge(a,b)åœ¨è¯­ä¹‰ä¸Šæ˜¯ç­‰ä»·çš„. 

ä¸¤è€…æœ‰å¦‚ä¸‹çš„å…±åŒç‚¹:

1.å½¢å‚ç›¸åŒ.éƒ½æ˜¯(Person, Person).
2.è°ƒç”¨æ–¹æ³•Person.compareByAge.


â‘¡ æ–¹æ³•å¼•ç”¨çš„ç§ç±»
---


<table class="table table-bordered table-responsive text-center">
	<thead>
		<tr class="info">
			<td>ç±»å‹</td>
			<td>ç¤ºä¾‹</td>
		</tr>
	</thead>
	<tbody>
	<tr>
		<td>ç±»é™æ€æ–¹æ³•å¼•ç”¨</td>
		<td>ContainingClass::staticMethodName</td>
	</tr>
	<tr>
		<td>æŸä¸ªå¯¹è±¡çš„æ–¹æ³•å¼•ç”¨</td>
		<td>ContainingObject::instanceMethodName</td>
	</tr>
	<tr>
		<td>ç‰¹å®šç±»çš„ä»»æ„å¯¹è±¡çš„æ–¹æ³•å¼•ç”¨</td>
		<td>ContainingType::methodName</td>
	</tr>
	<tr>
		<td>æ„é€ æ–¹æ³•å¼•ç”¨</td>
		<td>ClassName::new</td>
	</tr>
	</tbody>
</table>

###1.é™æ€æ–¹æ³•å¼•ç”¨
æ–¹æ³•å¼•ç”¨Person::compareByAge å°±æ˜¯å¯¹ä¸€ä¸ªé™æ€æ–¹æ³•å¼•ç”¨.

###2.æŸä¸ªå¯¹è±¡çš„æ–¹æ³•å¼•ç”¨
ä¸‹é¢å°±æ˜¯ä¸€ä¸ªå¯¹ç‰¹å®šå¯¹è±¡çš„å®ä¾‹æ–¹æ³•å¼•ç”¨çš„ä¾‹å­:

```java
class ComparisonProvider {
    public int compareByName(Person a, Person b) {
        return a.getName().compareTo(b.getName());
    }
    public int compareByAge(Person a, Person b) {
        return a.getBirthday().compareTo(b.getBirthday());
    }
}
ComparisonProvider myComparisonProvider = new ComparisonProvider();
Arrays.sort(rosterAsArray, myComparisonProvider::compareByName);
```

è¿™ä¸ªæ–¹æ³•å¼•ç”¨myComparisonProvider::compareByNameè°ƒç”¨äº†myComparisonProviderå¯¹è±¡çš„compareByNameæ–¹æ³•. JREä¼šæ¨æ–­å‡ºæ–¹æ³•çš„ç±»å‹å‚æ•°,æ¯”å¦‚åœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯(Person, Person).

###3.ç‰¹å®šç±»çš„ä»»æ„å¯¹è±¡çš„æ–¹æ³•å¼•ç”¨

```java
String[]stringArray = { "Barbara", "James", "Mary", "John",
    "Patricia", "Robert", "Michael", "Linda" };
Arrays.sort(stringArray, String::compareToIgnoreCase);
```

ä¸è¿™ä¸ªæ–¹æ³•å¼•ç”¨String::compareToIgnoreCaseç­‰ä»·çš„lambdaè¡¨è¾¾å¼è¦æœ‰å½¢å‚åˆ—è¡¨(String a, String b),æ­¤å¤„aå’Œbæ˜¯éšæ„å–çš„åå­—.è¿™ä¸ªæ–¹æ³•å¼•ç”¨å°†ä¼šè§¦å‘a.compareToIgnoreCase(b) æ–¹æ³•æ‰§è¡Œ.

###4.æ„é€ æ–¹æ³•å¼•ç”¨
ä½¿ç”¨newå…³é”®è¯å¼•ç”¨æ„é€ æ–¹æ³•å°±åƒå¼•ç”¨ç±»é™æ€æ–¹æ³•ä¸€æ ·.ä¸‹é¢æ–¹æ³•å®ç°äº†ä»ä¸€ä¸ªé›†åˆå¤åˆ¶å…¶å…ƒç´ åˆ°å¦ä¸€ä¸ªé›†åˆä¸­:

```java
public static <T, SOURCE extends Collection<T>, DEST extends Collection<T>>
    DEST transferElements(
        SOURCEsourceCollection,
        Supplier<DEST>collectionFactory) {
      DESTresult = collectionFactory.get();
        for (T t : sourceCollection) {
           result.add(t);
        }
        return result;
}
```
å‡½æ•°æ¥å£Supplieræœ‰ä¸€ä¸ªæ–¹æ³•get,getæ— è¾“å…¥å‚æ•°,è¾“å‡ºæ˜¯ä¸€ä¸ªå¯¹è±¡.è¿™æ ·,ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªlambda è¡¨è¾¾å¼è°ƒç”¨transferElementsæ–¹æ³•,å¦‚ä¸‹æ‰€ç¤º:

```java
Set<Person>rosterSetLambda =
    transferElements(roster, () -> { return new HashSet<>(); });
```

è¿›ä¸€æ­¥,ä½ å¯ä»¥ä½¿ç”¨æ„é€ æ–¹æ³•å¼•ç”¨æ¥æ›¿ä»£lambda è¡¨è¾¾å¼:

```java
Set<Person>rosterSet = transferElements(roster, HashSet::new);
```

Javaç¼–è¯‘å™¨æ¨æ–­å‡ºä½ æƒ³åˆ›å»ºä¸€ä¸ªHashSeté›†åˆ,å…¶ä¸­åŒ…å«Personç±»å‹çš„å…ƒç´ .å½“ç„¶,ä½ ä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™æ ·æ˜¾å¼çš„æŒ‡å®šé›†åˆå…ƒç´ çš„ç±»å‹ä¸ºPerson

```java
Set<Person>rosterSet = transferElements(roster,HashSet<Person>::new);
```

â‘¢ ç›¸å…³æ–‡ç« 
---

ğŸ“– [Javaä»å…¥é—¨åˆ°ç²¾é€šç´¢å¼•](http://localhost/article/java/index.html)

 
â‘£ å‚è€ƒæ–‡ç« 
---
ğŸ“– [http://blog.csdn.net/wwwsssaaaddd/article/details/37573517](http://blog.csdn.net/wwwsssaaaddd/article/details/37573517)

ğŸ“– [http://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html](http://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html)