PHPä¸­æ–‡JSONä¹±ç 
===

php5.4ä»¥ä¸‹å°è£…JSONæ•°æ®æ—¶ä¼šæœ‰ä¹±ç .


â‘  åŠ å…¥headeré‡‡ç”¨utf-8ç¼–ç 
---
```php
header("Content-type:text/html;charset=utf-8");
```

â‘¡ ä¿®æ”¹å°è£…JSONæ–¹æ³•
---

```php
/**
* å¯¹å˜é‡è¿›è¡Œ JSON ç¼–ç 
* @param mixed value å¾…ç¼–ç çš„ value ï¼Œé™¤äº†resource ç±»å‹ä¹‹å¤–ï¼Œå¯ä»¥ä¸ºä»»ä½•æ•°æ®ç±»å‹ï¼Œè¯¥å‡½æ•°åªèƒ½æ¥å— UTF-8 ç¼–ç çš„æ•°æ®
* @return string è¿”å› value å€¼çš„ JSON å½¢å¼
*/
function json_encode_ex($value)
{
    if (version_compare(PHP_VERSION,'5.4.0','<'))
    {
        $str = json_encode($value);
        $str = preg_replace_callback(
		"#\\\u([0-9a-f]{4})#i",
		function($matchs)
		{
			 return iconv('UCS-2BE', 'UTF-8', pack('H4', $matchs[1]));
		},
		 $str
		);
        return $str;
    }
    else
    {
        return json_encode($value, JSON_UNESCAPED_UNICODE);
    }
}

echo json_encode_ex($serverArr);
```

â‘¢ ç›¸å…³æ–‡ç« 
---

ğŸ“– [PHPå¸¸è§é—®é¢˜](http://localhost/article/php/index.php)
